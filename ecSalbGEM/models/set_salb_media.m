function constrained = set_salb_media(model,uptake)
if nargin <2
    uptake = [];
end
%get all exchanges
[a,b] = getExchangeRxns(model);
if isfield(model,'ec')
prot_pos = find(strcmp(model.rxns,'prot_pool_exchange'));
b = setdiff(b,prot_pos);
end
%close all uptakes
constrained = model;
constrained.lb(b) = 0;
constrained.ub(b) = 1000;
%
components = {'EX_ca2_e' ...
    'EX_cl_e' ...
    'EX_co2_e' ... 
    'EX_cobalt2_e' ...
    'EX_cu2_e' ...
    'EX_fe2_e' ...
    'EX_h2o_e' ...
    'EX_h_e' ... 
    'EX_k_e' ...
    'EX_mg2_e' ...
    'EX_mn2_e' ...
    'EX_mobd_e' ...
    'EX_na1_e' ...
    'EX_nh4_e' ...
    'EX_ni2_e' ...
    'EX_o2_e' ...
    'EX_pi_e' ...
    'EX_so4_e' ...
    'EX_tungs_e' ...
    'EX_zn2_e'};
constrained = setParam(constrained,'lb',components,-1000);
if ~isempty(uptake)
    constrained = setParam(constrained,'lb','EX_glc__D_e',-uptake);
else
    constrained = setParam(constrained,'lb','EX_glc__D_e',-1000);
end
sol = solveLP(constrained);
if isempty(sol.f)
    warning('The model is not feasible with the specified constraints')
end
end